extends index

block title
	title= owner + ' | ToonStore.net'

block append styles
	style.
		span.fakeLink {
			color: blue;
			cursor: pointer;
		}

block append includes
	script.
		function togglePrivacy(toonName){
			$.post('/togglePrivacy', {id: toonName}, function(data,status,xhr)
			{
				window.location.reload(true);
			});
		}


block content

	.content-block
		h1
			span= owner
			span 's page

	.content-block: .normalbox
		if toons.length > 0
			h4 Characters:
			ul#charList
				each char in toons
					li
						a(href='/#{owner}/#{char.canon_name}/')= char.name +', '+ char.concept
						| &nbsp;
						if logged_user != null
							span(style='font-size: 80%;')
								| (
								a(href='/newtoon?copy=/#{owner}/#{char.canon_name}/') Duplicate
								| )
						if logged_user == owner
							span(style='font-size: 80%;')
								| (
								span.fakeLink(onclick='togglePrivacy("#{char.canon_name}")') Make Private
								| )
							span(style='font-size: 80%;')
								| (
								a(href='/killtoon?id=#{char.canon_name}') Delete
								| )

		else if logged_user == owner
			p No public characters

		else
			p This user lacks character (badum-ching!)

		if logged_user == owner && privateToons.length > 0
			h4 Private characters:
			ul#charList
				each char in privateToons
					li
						a(href='/#{owner}/#{char.canon_name}/')= char.name +', '+ char.concept
						| &nbsp;
						span(style='font-size: 80%;')
							| (
							a(href='/newtoon?copy=/#{owner}/#{char.canon_name}/&private') Duplicate
							| )
						span(style='font-size: 80%;')
							| (
							span.fakeLink(onclick='togglePrivacy("#{char.canon_name}")') Make Public
							| )
						span(style='font-size: 80%;')
							| (
							a(href='/killtoon?id=#{char.canon_name}') Delete
							| )
		else if logged_user == owner
			p No private characters

		if logged_user == owner
			p: a(href='/newtoon') Create a new character
